clone:
  depth: 1
build:
  image: golang
  environment:
    - GAE_SDK_URL=https://storage.googleapis.com/appengine-sdks/featured/go_appengine_sdk_linux_amd64-1.9.30.zip
  commands:
    - apt-get update -qq && apt-get install -y unzip --no-install-recommends
    - curl -sSLo sdk.zip $GAE_SDK_URL && unzip -q sdk.zip
    - cp config.json.sample config.json
    - go_appengine/goapp get -d -t
    - go_appengine/goapp test
    - go get github.com/golang/lint/golint && golint
